<div id="produkGrid" class="grid grid-cols-1 gap-4"></div>

<script>
    async function loadProduk() {
        const res = await fetch(API + "?action=getProduk");
        const db = await res.json();
        let html = "";

        db.forEach(item => {
            // Link Maps automatik berdasarkan nama lokasi
            const mapLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.Lokasi)}`;
            
            html += `
            <div class="bg-white p-5 rounded-[30px] shadow-lg border-l-8 border-green-600">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="font-black text-gray-800 uppercase text-lg">${item.NamaBarang}</h3>
                        <p class="text-green-600 font-bold">RM ${item.Harga.toFixed(2)} /kg</p>
                    </div>
                    <span class="bg-orange-100 text-orange-700 text-[10px] px-2 py-1 rounded-lg font-bold tracking-tighter">STOK: ${item.Stok}KG</span>
                </div>
                
                <div class="mt-4 bg-slate-50 p-4 rounded-2xl border border-dashed border-slate-200">
                    <p class="text-[9px] font-black text-slate-400 uppercase mb-1">üìç Lokasi Jualan:</p>
                    <p class="text-xs font-bold text-slate-700 mb-3">${item.Lokasi || 'Kebun Perak'}</p>
                    <a href="${mapLink}" target="_blank" class="block w-full bg-blue-600 text-white text-center py-3 rounded-xl text-[10px] font-black shadow-md hover:bg-blue-700 transition">
                        üöó PANDU KE LOKASI (MAPS)
                    </a>
                </div>
            </div>`;
        });
        document.getElementById("produkGrid").innerHTML = html;
    }
    loadProduk();
</script>
